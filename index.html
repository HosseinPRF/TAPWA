<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0d9488" />
  <title>TAPWA โ ุซุจุช ุชุฌุฑุจู TA</title>

  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" sizes="192x192" href="./icon-192.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="./icon-192.png" />
</head>
<body>

  <!-- ููุงุฑ ุจุงูุง ุซุงุจุช ุจุง ุฏฺฉูู ยซุดุฑูุน ุงุฒ ุงููยป ฺฉู ููุดู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช -->
  <header class="topbar">
    <div class="brand">TAPWA</div>
    <button id="btn-reset" class="ghost">ุดุฑูุน ุงุฒ ุงูู ๐</button>
  </header>

  <main id="app">
    <!-- Screen 0: ูุนุฑู/ุฏุฑุงูุช ุงุทูุงุนุงุช ุงููู -->
    <section id="screen-intro" class="screen active">
      <h1>ุดุฑูุน ุซุจุช ุชุฌุฑุจู ุชุญูู ุฑูุชุงุฑ ูุชูุงุจู</h1>
      <p class="muted">ูุทูุงู ุงุทูุงุนุงุช ูพุงู ุฑุง ูุงุฑุฏ ฺฉู.</p>

      <label class="field">
        <span>ูุงู ุดูุง</span>
        <input id="your_name" type="text" placeholder="ูุซูุงู ุญุณู" autocomplete="off" />
      </label>

      <label class="field">
        <span>ูุงู ุทุฑู ููุงุจู</span>
        <input id="other_name" type="text" placeholder="ูุซูุงู ุนู" autocomplete="off" />
      </label>

      <label class="field">
        <span>ุฎูุงุตู ฺฉูุชุงู ูููุนุช</span>
        <textarea id="summary" rows="3" placeholder="ฑโณ ุฌููู ุฏุฑุจุงุฑู ูููุนุช..."></textarea>
      </label>

      <div class="actions">
        <!-- ุชุบุฑ ุงุตู: type="button" -->
        <button id="next-0" class="primary" type="button">ุงุฏุงูู</button>
      </div>
    </section>

    <!-- Screen 1: ููุด ุดูุง -->
    <section id="screen-your-role" class="screen">
      <h2>ููุด ุฎูุฏุช ุฑุง ุงูุชุฎุงุจ ฺฉู</h2>
      <p class="hint">
        ฺฉูุฏฺฉ ๐ถ โ ููุงูุฏู ุงุญุณุงุณุงุช ู ุฎูุฏุงูฺฏุฎุชฺฏ |
        ุจุงูุบ ๐ง โ ููุทู ู ูุงูุนโูฺฏุฑ |
        ูุงูุฏ ๐จโ๐ซ โ ููุงุนุฏ ู ุงุฑุฒุดโูุง ุฏุฑููโุดุฏู
      </p>
      <div id="your-role-choices" class="grid"></div>
      <div id="your-subrole-choices" class="grid" style="display:none"></div>

      <div class="actions">
        <button id="back-1" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="next-1" class="primary">ุงุฏุงูู</button>
      </div>
    </section>

    <!-- Screen 2: ููุด ุทุฑู ููุงุจู -->
    <section id="screen-other-role" class="screen">
      <h2>ููุด ุทุฑู ููุงุจู ุฑุง ุงูุชุฎุงุจ ฺฉู</h2>
      <p class="hint">
        ุจุฑุง ฺฉูุฏฺฉ/ูุงูุฏุ ุฒุฑููุดโูุง ุจุนุฏ ุงุฒ ุงูุชุฎุงุจุ ูููโุฌุง ููุงุด ุฏุงุฏู ูโุดููุฏ.
      </p>
      <div id="other-role-choices" class="grid"></div>
      <div id="other-subrole-choices" class="grid" style="display:none"></div>

      <div class="actions">
        <button id="back-2" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="next-2" class="primary">ุงุฏุงูู</button>
      </div>
    </section>

    <!-- Screen 3: ุงุญุณุงุณโูุง -->
    <section id="screen-emotions" class="screen">
      <h2>ุงุญุณุงุณโูุง ุบุงูุจ ุชู ฺู ุจูุฏูุ</h2>
      <p class="hint">ูโุชูู ฺูุฏุชุง ุงูุชุฎุงุจ ฺฉูุ ุฏุฑ ูพุงุงู ยซุงุชูุงู ุงูุชุฎุงุจยป ุฑุง ุจุฒู.</p>
      <div id="emotion-choices" class="grid"></div>
      <div class="actions">
        <button id="back-3" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="emotions-done" class="primary">โ ุงุชูุงู ุงูุชุฎุงุจ</button>
      </div>
    </section>

    <!-- Screen 4: ูุงุฒูุง ุดูุง -->
    <section id="screen-your-needs" class="screen">
      <h2>ูุงุฒูุง ุฎูุฏุช ุฑุง ุงูุชุฎุงุจ ฺฉู</h2>
      <div class="hint">
        <div><strong>ุจูุง ๐ก๏ธ</strong> โ ุงููุช/ุณูุงูุช/ูพูู/ูุธู</div>
        <div><strong>ุนุดู ู ุชุนูู ๐</strong> โ ุงุฑุชุจุงุท/ูพุฐุฑูุชูโุดุฏู</div>
        <div><strong>ูุฏุฑุช ู ุงุฑุฒุดููุฏ ๐ช</strong> โ ุงุซุฑฺฏุฐุงุฑ/ุงุญุชุฑุงู</div>
        <div><strong>ุขุฒุงุฏ ๐๏ธ</strong> โ ุงุณุชููุงู/ุญู ุงูุชุฎุงุจ</div>
        <div><strong>ุชูุฑุญ ู ูุฐุช ๐จ</strong> โ ุณุฑฺฏุฑู/ุฎูุงูุช</div>
      </div>
      <div id="your-need-choices" class="grid"></div>
      <div class="actions">
        <button id="back-4" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="your-needs-done" class="primary">โ ุงุชูุงู ุงูุชุฎุงุจ</button>
      </div>
    </section>

    <!-- Screen 5: ุฌุฒุฆุงุช ูุงุฒูุง ุดูุง (ุดุฏุช/ุฌูุช/ุฑุงูุจุฑุฏ/ูุชุฌู) -->
    <section id="screen-your-need-details" class="screen">
      <h2 id="your-need-title">ุฌุฒุฆุงุช ูุงุฒ</h2>
      <div id="your-need-steptext" class="hint"></div>
      <div id="your-need-options" class="grid"></div>
      <div class="actions">
        <button id="back-5" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="next-5" class="primary">ุงุฏุงูู</button>
      </div>
    </section>

    <!-- Screen 6: ูุงุฒูุง ุทุฑู ููุงุจู -->
    <section id="screen-other-needs" class="screen">
      <h2>ุจู ูุธุฑุช ูุงุฒูุง ุทุฑู ููุงุจู ฺู ุจูุฏูุ</h2>
      <div class="hint">
        <div><strong>ุจูุง ๐ก๏ธ</strong> โ ุงููุช/ุณูุงูุช/ูพูู/ูุธู</div>
        <div><strong>ุนุดู ู ุชุนูู ๐</strong> โ ุงุฑุชุจุงุท/ูพุฐุฑูุชูโุดุฏู</div>
        <div><strong>ูุฏุฑุช ู ุงุฑุฒุดููุฏ ๐ช</strong> โ ุงุซุฑฺฏุฐุงุฑ/ุงุญุชุฑุงู</div>
        <div><strong>ุขุฒุงุฏ ๐๏ธ</strong> โ ุงุณุชููุงู/ุญู ุงูุชุฎุงุจ</div>
        <div><strong>ุชูุฑุญ ู ูุฐุช ๐จ</strong> โ ุณุฑฺฏุฑู/ุฎูุงูุช</div>
      </div>
      <div id="other-need-choices" class="grid"></div>
      <div class="actions">
        <button id="back-6" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="other-needs-done" class="primary">โ ุงุชูุงู ุงูุชุฎุงุจ</button>
      </div>
    </section>

    <!-- Screen 7: ุฌุฒุฆุงุช ูุงุฒูุง ุทุฑู ููุงุจู -->
    <section id="screen-other-need-details" class="screen">
      <h2 id="other-need-title">ุฌุฒุฆุงุช ูุงุฒ</h2>
      <div id="other-need-steptext" class="hint"></div>
      <div id="other-need-options" class="grid"></div>
      <div class="actions">
        <button id="back-7" class="ghost">ุจุงุฒฺฏุดุช</button>
        <button id="next-7" class="primary">ุงุฏุงูู</button>
      </div>
    </section>

    <!-- Screen 8: ุจุงุฒโูุง -->
    <section id="screen-games" class="screen">
      <h2>ุขุง ุงู ูููุนุช ุจู ยซุจุงุฒยป ูโุฏุงุฏุ</h2>
      <div class="hint">
        ุจุงุฒ = ุงูฺฏู ุชฺฉุฑุงุฑ ฺฉู ุจุง ุณูุฆฺ ููุดโูุง (ูุฑุจุงู/ูุฌุงุชฺฏุฑ/ุขุฒุงุฑฺฏุฑ) ู ุญุณ ูุงุฎูุดุงูุฏ ุชูุงู ูโุดูุฏ.
        <br/>ูุดุงููโูุง: ุฑุฏ ูพุดุชโุณุฑูู ฺฉูฺฉ ุจุง ยซููโฆยปุ ฺฉูู ุจุฑุง ุฎุทุงุ ุชูุด ุจุงูุงุ ูพุงุงู ุจุฏูู ุญู ูุณุฆูู.
      </div>
      <div class="actions">
        <button id="games-no" class="ghost">ุฎุฑ</button>
        <button id="games-yes" class="primary">ุจูู</button>
      </div>

      <div id="game-picker" style="display:none">
        <h3>ูุงู ุจุงุฒ/ุจุงุฒโูุง ุฑุง ุงูุชุฎุงุจ ฺฉู</h3>
        <div id="game-choices" class="grid"></div>
        <div class="hint" id="game-info-block"></div>
        <div class="actions">
          <button id="games-done" class="primary">โ ุงุชูุงู ุงูุชุฎุงุจ</button>
        </div>
      </div>

      <div id="switch-note-block" style="display:none">
        <h3>๐งฉ ูุญุธูู ุณูุฆฺ ุฑุง ฺฉูุชุงู ุจููุณ</h3>
        <p class="hint" id="switch-guide"></p>
        <textarea id="switch-note" rows="3" placeholder="ูุซุงู: ููุช ฺฏูุช ยซุชู ุงุตูุงู ููโูููโฆยปุ ูู ุงุฒ ุจุงูุบโูุงูุฏ ุงูุชูุงุฏฺฏุฑ ุฑูุชู ู ุงู ูุฑุจุงู ุดุฏ."></textarea>
        <div class="actions">
          <button id="switch-save" class="primary">ุซุจุช</button>
        </div>
      </div>

      <div class="actions">
        <button id="back-8" class="ghost">ุจุงุฒฺฏุดุช</button>
      </div>
    </section>

    <!-- Screen 9: ุฎูุงุตู ู ุฎุฑูุฌ -->
    <section id="screen-summary" class="screen">
      <h2>ุฎูุงุตูู ุชุฌุฑุจู</h2>
      <pre id="summary-text" class="card"></pre>

      <div class="actions">
        <button id="btn-copy" class="secondary">ฺฉูพ ุจู ฺฉููพโุจูุฑุฏ</button>
        <button id="btn-share" class="secondary">ุงุฑุณุงู/ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ</button>
        <button id="btn-save" class="primary">ุฐุฎุฑู ูุญู</button>
      </div>

      <p class="muted small">
        ุฐุฎุฑู ูุญู ุฑู ุฏุณุชฺฏุงู ุดูุง ุงูุฌุงู ูโุดูุฏ (PWA/LocalStorage). ุจุฑุง ูพุงฺฉโุณุงุฒุ ุงุฒ ููู ฺฏุฒููโ ยซูพุงฺฉโฺฉุฑุฏู ุฏุงุฏูโูุงยป ุฑุง ุจุฒูุฏ.
      </p>

      <div class="actions">
        <button id="finish-new" class="ghost">ุดุฑูุน ุซุจุช ุฌุฏุฏ ๐</button>
      </div>
    </section>
  </main>

  <!-- ุจูุชโูฺฉุณ: ุงฺฏุฑ ุจู ูุฑ ุฏูู app ุงุตู ุฏุฑ ููุฏ ุดุฏุ ุญุฑฺฉุช ุงุฒ ฐโฑ ุฑุง ุชุถูู ูโฺฉูุฏ -->
  <script>
    window.addEventListener('DOMContentLoaded', function () {
      var btn = document.getElementById('next-0');
      if (btn) {
        btn.addEventListener('click', function () {
          var s0 = document.getElementById('screen-intro');
          var s1 = document.getElementById('screen-your-role');
          if (s0 && s1) { s0.classList.remove('active'); s1.classList.add('active'); }
        }, { once: true });
      }
    });
  </script>

  <!-- ุงุณฺฉุฑูพุช ุงุตู ูุณุฎูโุฏุงุฑ (ุจุฑุง ุดฺฉุณุชู ฺฉุด) -->
  <script src="./app.v6.js" defer></script>

  <!-- ุซุจุช ุณุฑูุณโูุฑฺฉุฑ (ุงฺฏุฑ ุฏุงุฎู app.v6.js ูู ุฑุฌุณุชุฑ ูโฺฉูุ ุงู ูุดฺฉู ุงุฌุงุฏ ููโฺฉูุฏ) -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistration().then(function (reg) {
        if (!reg) navigator.serviceWorker.register('./service-worker.js');
      });
    }
  </script>
</body>
</html>
